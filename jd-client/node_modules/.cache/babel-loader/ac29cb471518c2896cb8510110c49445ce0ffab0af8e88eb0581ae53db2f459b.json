{"ast":null,"code":"import CryptoJS from 'crypto-js';\nimport { ElMessage } from 'element-plus';\nexport default {\n  data() {\n    return {\n      email: '',\n      password: ''\n    };\n  },\n  methods: {\n    loginButton() {\n      return this.email.trim() && this.password.trim();\n    },\n    clickLogin() {\n      // 定义一个正则表达式来验证邮箱格式\n      const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n      // 验证邮箱格式\n      if (!emailPattern.test(this.email)) {\n        ElMessage({\n          message: '邮箱格式不正确',\n          type: 'error'\n        });\n        return;\n      }\n      // 验证密码长度\n      if (this.password.trim().length < 6) {\n        ElMessage({\n          message: '密码长度不能小于6位',\n          type: 'error'\n        });\n        return;\n      }\n      // 加密密码\n      const encrypted = CryptoJS.AES.encrypt(this.password.trim(), CryptoJS.enc.Utf8.parse(this.email), {\n        iv: CryptoJS.enc.Utf8.parse('1234567890123456'),\n        mode: CryptoJS.mode.CBC,\n        padding: CryptoJS.pad.Pkcs7\n      }).toString();\n      // 提取密文（Base64 编码）\n      const encryptedJson = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\n      this.$api.loginToPassword(this.email, encryptedJson).then(res => {\n        if (res.data.success) {\n          ElMessage({\n            message: res.data.message,\n            type: 'success'\n          });\n          localStorage.token = res.data.data;\n        } else {\n          ElMessage({\n            message: res.data.message,\n            type: 'error'\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["CryptoJS","ElMessage","data","email","password","methods","loginButton","trim","clickLogin","emailPattern","test","message","type","length","encrypted","AES","encrypt","enc","Utf8","parse","iv","mode","CBC","padding","pad","Pkcs7","toString","encryptedJson","ciphertext","Base64","$api","loginToPassword","then","res","success","localStorage","token"],"sources":["E:\\schoolProject\\JD-project\\jd-client\\src\\views\\login\\PasswordLoginView.vue"],"sourcesContent":["<template>\r\n    <el-row>\r\n        <el-col :span=\"24\">\r\n            <div class=\"input-group\">\r\n                <input type=\"text\" placeholder=\"邮箱\" v-model=\"email\">\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n    <el-row>\r\n        <el-col :span=\"24\">\r\n            <div class=\"input-group\">\r\n                <input type=\"password\" placeholder=\"密码\" v-model=\"password\">\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n    <el-row>\r\n        <el-col :span=\"24\" style=\"text-align: right;\r\n        font-size: 13px;padding:10px;color:rgb(111, 118, 126);\r\n        cursor: pointer;\">\r\n            忘记密码\r\n        </el-col>\r\n    </el-row>\r\n    <el-row>\r\n        <el-col :span=\"24\">\r\n            <div class=\"input-group\" \r\n            :style=\"{backgroundColor:loginButton()?'rgb(250, 44, 25)':'rgb(253, 157, 148)'}\"\r\n            style=\"padding:10px 0;display: flex;justify-content: center;align-items: center;\">\r\n                <input \r\n                type=\"button\" \r\n                class=\"input-button\" \r\n                value=\"登     录\"\r\n                :style=\"{backgroundColor:loginButton()?'rgb(250, 44, 25)':'rgb(253, 157, 148)'}\"\r\n                @click.prevent=\"clickLogin\">\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<script>\r\nimport CryptoJS  from 'crypto-js';\r\nimport { ElMessage } from 'element-plus'\r\nexport default{\r\n    data(){\r\n        return{\r\n            email:'',\r\n            password:''\r\n        }\r\n    },\r\n    methods:{\r\n        loginButton(){\r\n            return this.email.trim() && this.password.trim()\r\n        },\r\n        clickLogin(){\r\n            // 定义一个正则表达式来验证邮箱格式\r\n            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n            // 验证邮箱格式\r\n            if (!emailPattern.test(this.email)) {\r\n                ElMessage({\r\n                    message: '邮箱格式不正确',\r\n                    type: 'error'\r\n                })\r\n                return\r\n            }\r\n            // 验证密码长度\r\n            if (this.password.trim().length < 6) {\r\n                ElMessage({\r\n                    message: '密码长度不能小于6位',\r\n                    type: 'error'\r\n                })\r\n                return\r\n            }\r\n            // 加密密码\r\n            const encrypted=CryptoJS.AES.encrypt(this.password.trim(),CryptoJS.enc.Utf8.parse(this.email),{\r\n                iv:CryptoJS.enc.Utf8.parse('1234567890123456'),\r\n                mode:CryptoJS.mode.CBC,\r\n                padding:CryptoJS.pad.Pkcs7\r\n            }).toString()\r\n            // 提取密文（Base64 编码）\r\n            const encryptedJson = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r\n            this.$api.loginToPassword(this.email,encryptedJson).then(res=>{\r\n                if(res.data.success){\r\n                    ElMessage({\r\n                        message: res.data.message,\r\n                        type: 'success'\r\n                    })\r\n                    localStorage.token=res.data.data\r\n                }else{\r\n                    ElMessage({\r\n                        message: res.data.message,\r\n                        type: 'error'\r\n                    })\r\n                }\r\n            })\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n@import url('./login.css');\r\n</style>"],"mappings":"AAsCA,OAAOA,QAAO,MAAQ,WAAW;AACjC,SAASC,SAAQ,QAAS,cAAa;AACvC,eAAc;EACVC,IAAIA,CAAA,EAAE;IACF,OAAM;MACFC,KAAK,EAAC,EAAE;MACRC,QAAQ,EAAC;IACb;EACJ,CAAC;EACDC,OAAO,EAAC;IACJC,WAAWA,CAAA,EAAE;MACT,OAAO,IAAI,CAACH,KAAK,CAACI,IAAI,CAAC,KAAK,IAAI,CAACH,QAAQ,CAACG,IAAI,CAAC;IACnD,CAAC;IACDC,UAAUA,CAAA,EAAE;MACR;MACA,MAAMC,YAAW,GAAI,kDAAkD;MACvE;MACA,IAAI,CAACA,YAAY,CAACC,IAAI,CAAC,IAAI,CAACP,KAAK,CAAC,EAAE;QAChCF,SAAS,CAAC;UACNU,OAAO,EAAE,SAAS;UAClBC,IAAI,EAAE;QACV,CAAC;QACD;MACJ;MACA;MACA,IAAI,IAAI,CAACR,QAAQ,CAACG,IAAI,CAAC,CAAC,CAACM,MAAK,GAAI,CAAC,EAAE;QACjCZ,SAAS,CAAC;UACNU,OAAO,EAAE,YAAY;UACrBC,IAAI,EAAE;QACV,CAAC;QACD;MACJ;MACA;MACA,MAAME,SAAS,GAACd,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,IAAI,CAACZ,QAAQ,CAACG,IAAI,CAAC,CAAC,EAACP,QAAQ,CAACiB,GAAG,CAACC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAChB,KAAK,CAAC,EAAC;QAC1FiB,EAAE,EAACpB,QAAQ,CAACiB,GAAG,CAACC,IAAI,CAACC,KAAK,CAAC,kBAAkB,CAAC;QAC9CE,IAAI,EAACrB,QAAQ,CAACqB,IAAI,CAACC,GAAG;QACtBC,OAAO,EAACvB,QAAQ,CAACwB,GAAG,CAACC;MACzB,CAAC,CAAC,CAACC,QAAQ,CAAC;MACZ;MACA,MAAMC,aAAY,GAAIb,SAAS,CAACc,UAAU,CAACF,QAAQ,CAAC1B,QAAQ,CAACiB,GAAG,CAACY,MAAM,CAAC;MACxE,IAAI,CAACC,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC5B,KAAK,EAACwB,aAAa,CAAC,CAACK,IAAI,CAACC,GAAG,IAAE;QAC1D,IAAGA,GAAG,CAAC/B,IAAI,CAACgC,OAAO,EAAC;UAChBjC,SAAS,CAAC;YACNU,OAAO,EAAEsB,GAAG,CAAC/B,IAAI,CAACS,OAAO;YACzBC,IAAI,EAAE;UACV,CAAC;UACDuB,YAAY,CAACC,KAAK,GAACH,GAAG,CAAC/B,IAAI,CAACA,IAAG;QACnC,CAAC,MAAI;UACDD,SAAS,CAAC;YACNU,OAAO,EAAEsB,GAAG,CAAC/B,IAAI,CAACS,OAAO;YACzBC,IAAI,EAAE;UACV,CAAC;QACL;MACJ,CAAC;IAEL;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}